<%= link_to root_path, class: "back-button" do %>
  <i class="fas fa-arrow-left"></i>
<% end %>
<%= link_to image_tag("logo.png", width: 20, class: 'page-title', style:"width: 112px") %>
<div class="container">


<div class="w-100">
<h1 class="title py-3"><strong>Edit <%= resource_name.to_s.humanize %></strong></h1>
</div>

<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :email, required: true, autofocus: true %>

    <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <p>Currently waiting confirmation for: <%= resource.unconfirmed_email %></p>
    <% end %>

    <%= f.input :first_name,
                required: false,
                input_html: { autocomplete: "Name" } %>
    <%= f.input :last_name,
                required: false,
                input_html: { autocomplete: "" } %>
    <%= f.input :age,
                required: false,
                input_html: { autocomplete: "" } %>
    <div class="form-group">
        <%= f.label "Profile picture" %>
        <%= f.file_field :photo,
                    required: false,
                    input_html: { autocomplete: "Last name" } %>
      </div>
    <%= f.input :bio,
                required: false,
                input_html: { autocomplete: "" } %>
    <%= f.input :language_ids,
                required: false,
                label: "Spoken Languages",
                collection: Language.all, input_html: { multiple: true } %>
    <%= f.input :password,
                label: "Change password",
                hint: "leave it blank if you don't want to change it",
                required: false,
                input_html: { autocomplete: "new-password" } %>
    <%= f.input :password_confirmation,
                label: "New password confirmation",
                required: false,
                input_html: { autocomplete: "new-password" } %>
    <%= f.input :current_password,
                hint: "we need your current password to confirm your changes",
                required: true,
                input_html: { autocomplete: "current-password" } %>
  </div>

  <div class="form-actions">
    <%= f.button :submit, "Update", class: "btn btn-primary mb-5"  %>
  </div>
<% end %>

<h5>Cancel my account</h5>

<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %></p>

<%= link_to "Back", :back %>

</div>



<style>
  select {
    height: 100px;
    width: 100px;
    display: block;
  }
</style>
<script>
  window.onmousedown = function (e) {
      var el = e.target;
      if (el.tagName.toLowerCase() == 'option' && el.parentNode.hasAttribute('multiple')) {
          e.preventDefault();

          // toggle selection
          if (el.hasAttribute('selected')) el.removeAttribute('selected');
          else el.setAttribute('selected', '');

          // hack to correct buggy behavior
          var select = el.parentNode.cloneNode(true);
          el.parentNode.parentNode.replaceChild(select, el.parentNode);
      }
  }
</script>
