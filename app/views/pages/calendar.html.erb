<%= link_to root_path, class: "back-button" do %>
  <i class="fas fa-arrow-left"></i>
<% end %>
<h1 class="page-title">BUDDY</h1>
<div class="container">

<div style="width: 90vw d-flex">
<h1 class="title py-3" style="width: 300px; font-size: 26px; margin-right: 30px" id="filters"><strong>Your upcoming events</strong></h1>
</div>

  <% if @events.length == 0 && params[:categories].nil?%>
    <p>You don't have any planned events!</p>
    <%= link_to "Search for a buddy", welcome_path, class: "btn btn-primary" %>
  <% else %>
    <%= render partial: "filters" %>
    <div class="pt-1"></div>
    <%= render partial: "calendar", locals: { events: @events } %>
    <div class="p-2"></div>

    <div class="d-flex flex-column-reverse w-100">
      <% @events.each do |event|  %>
        <div class="card-product">
          <%#= link_to event_path(event), style: "width: 45%;" do %>
          <%= link_to '', event_path(event), style:"width: 45%; background-size: cover; background-position: center; background-image: url('#{cl_image_path url_for(event.photo), height: 300, width: 400, crop: :fill}')"%>
          <%# end %>

          <div class="flex-column card-right">
            <ul class="card-product-infos ml-2">
              <%= link_to event_path(event) do %>
                <li><h2 style="margin: 0"><%= event.name %></h2></li>
              <% end %>
              <li><%= event.address %></li>
              <li style="color:gray; font-size: 16px, margin: 0"><%= event.date_time.strftime("%I:%M%p") %></li>
              <li style="color:#222; font-size: 16px, margin: 0"><%= event.date_time.strftime("%m/%d/%Y") %></li>
            </ul>

            <div class="d-flex pb-1">
              <% unless event.categories.first.nil? %>
                <span class="card-filter ml-3" style="background-color: <%= event.categories.first.color %>"><%= event.categories.first.name %></span>
              <% end %>
              <% unless event.categories.second.nil? %>
                <span class="card-filter" style="background-color: <%= event.categories.second.color %>"><%= event.categories.second.name %></span>
              <% end %>
            </div>
              <div style="position: absolute; top: 4px; left: 4px; background: white; width: 136px; height: 44px; border-radius: 300px; opacity: 0.7">
                <p style="position: absolute; right: 10px; font-size: 12px; color: #444; top: 12px;">Buddies!</p>
              </div>
              <div>
                <%= cl_image_tag(event.requests.find_by(status:"Accepted").user.photo.key, class: "card-avatar", style: "top: 6px; left: 6px; border: 1px solid rgba(255,255,255,0.7)") %>
                <%= cl_image_tag(event.user.photo.key, class: "card-avatar", style: "top: 6px; left: 35px; border: 1px solid rgba(200,200,200,0.7)") %>
              </div>
          </div>
        </div>

      <% end %>
    </div>
  <% end %>
</div>



              <div>
                  <%#= cl_image_tag(event.requests.find_by(status:"Accepted").user.photo.key, class: "card-avatar") %>
                  <%#= cl_image_tag(event.user.photo.key, class: "card-avatar", style: "right: 50px;") %>
              </div>
